---
const items = [
  {
    name: "Item 1",
    preview: "/Fisher.jpg"
  },
  {
    name: "Item 2",
    preview: "https://www.w3schools.com/html/mov_bbb.mp4"
  },
  {
    name: "Item 3",
    preview: "/Fisher.jpg"
  }
];
---

<div class="relative w-full h-screen overflow-hidden">
  <!-- Background Preview -->
  <div
    id="preview-bg"
    class="absolute inset-0 transition-all duration-500 ease-in-out"
    style={`background: url(${items[0].preview}) center/cover no-repeat`}
  ></div>

  <!-- Overlay to darken -->
  <div class="absolute inset-0 bg-black/40"></div>

  <!-- List Content -->
  <ul
    class="relative z-10 flex flex-col items-start justify-center h-full gap-4 text-white p-8"
    set:html={`
      ${items
        .map(
          (item, idx) =>
            `<li class="text-3xl font-bold cursor-pointer hover:text-yellow-400" data-preview="${item.preview}">
               ${item.name}
             </li>`
        )
        .join('')}
    `}
  ></ul>
</div>

<script>
  const bgDiv = document.getElementById('preview-bg');
  if (!bgDiv) {
    console.warn('Element with id "preview-bg" not found.');
  } else {
    document.querySelectorAll('[data-preview]').forEach((el) => {
      el.addEventListener('mouseenter', () => {
        const previewUrl = el.getAttribute('data-preview');
        if (previewUrl?.endsWith('.mp4')) {
          // Replace bg with a video
          bgDiv.innerHTML = `
            <video autoplay muted loop class="w-full h-full object-cover">
              <source src="${previewUrl}" type="video/mp4" />
            </video>
          `;
        } else {
          // Use image background
          bgDiv.innerHTML = '';
          bgDiv.style.background = `url(${previewUrl}) center/cover no-repeat`;
        }
      });
    });
  }
</script>
